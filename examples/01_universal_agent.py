"""
ĞœĞ¾Ğ´ÑƒĞ»ÑŒ 1: Ğ£Ğ½Ñ–Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ğ¸Ğ¹ Research Agent
ĞŸÑ€Ğ°Ñ†ÑÑ” Ğ½ĞµĞ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ Ğ²Ñ–Ğ´ Ğ²ĞµÑ€ÑÑ–Ñ— LangChain
"""

import os
import sys
from datetime import datetime
import json

# Ğ—Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ .env
try:
    from dotenv import load_dotenv
    load_dotenv()
    print("âœ… .env Ñ„Ğ°Ğ¹Ğ» Ğ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ¾")
except:
    print("âš ï¸ python-dotenv Ğ½Ğµ Ğ²ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾")

# ===========================
# Ğ£ĞĞ†Ğ’Ğ•Ğ Ğ¡ĞĞ›Ğ¬ĞĞ˜Ğ™ ĞĞ“Ğ•ĞĞ¢
# ===========================

class UniversalResearchAgent:
    """
    Ğ£Ğ½Ñ–Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ğ¸Ğ¹ Ğ°Ğ³ĞµĞ½Ñ‚ - Ğ¿Ñ€Ğ°Ñ†ÑÑ” Ğ½Ğ°Ğ²Ñ–Ñ‚ÑŒ Ğ±ĞµĞ· LangChain
    """
    
    def __init__(self):
        self.api_key = os.getenv("OPENAI_API_KEY")
        self.has_openai = False
        
        # Ğ¡Ğ¿Ñ€Ğ¾Ğ±ÑƒÑ”Ğ¼Ğ¾ Ñ–Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ÑƒĞ²Ğ°Ñ‚Ğ¸ OpenAI
        try:
            import openai
            self.openai = openai
            if self.api_key:
                self.client = openai.OpenAI(api_key=self.api_key)
                self.has_openai = True
                print(f"âœ… OpenAI API Ğ¿Ñ–Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾")
            else:
                print("âš ï¸ API ĞºĞ»ÑÑ‡ Ğ½Ğµ Ğ·Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾ - Ğ´ĞµĞ¼Ğ¾ Ñ€ĞµĞ¶Ğ¸Ğ¼")
        except ImportError:
            print("âš ï¸ OpenAI Ğ½Ğµ Ğ²ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾ - Ğ´ĞµĞ¼Ğ¾ Ñ€ĞµĞ¶Ğ¸Ğ¼")
    
    def search_web(self, query: str) -> str:
        """ĞŸĞ¾ÑˆÑƒĞº Ñ–Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ñ–Ñ—"""
        # Ğ¡Ğ¿Ñ€Ğ¾Ğ±ÑƒÑ”Ğ¼Ğ¾ ÑĞ¿Ñ€Ğ°Ğ²Ğ¶Ğ½Ñ–Ğ¹ Ğ¿Ğ¾ÑˆÑƒĞº
        try:
            from duckduckgo_search import DDGS
            with DDGS() as ddgs:
                results = list(ddgs.text(query, max_results=3))
                if results:
                    output = "ğŸ” Ğ ĞµĞ°Ğ»ÑŒĞ½Ñ– Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¸ Ğ¿Ğ¾ÑˆÑƒĞºÑƒ:\n\n"
                    for i, r in enumerate(results, 1):
                        output += f"{i}. **{r.get('title', 'Ğ‘ĞµĞ· Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºÑƒ')}**\n"
                        output += f"   {r.get('body', '')[:200]}...\n\n"
                    return output
        except:
            pass
        
        # Ğ”ĞµĞ¼Ğ¾ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚
        return f"""
ğŸ” Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¸ Ğ¿Ğ¾ÑˆÑƒĞºÑƒ Ğ´Ğ»Ñ '{query}':

1. **AI Ñ€ĞµĞ²Ğ¾Ğ»ÑÑ†Ñ–Ñ Ğ² Ğ¾ÑĞ²Ñ–Ñ‚Ñ– (2025)**
   Ğ¨Ñ‚ÑƒÑ‡Ğ½Ğ¸Ğ¹ Ñ–Ğ½Ñ‚ĞµĞ»ĞµĞºÑ‚ ĞºĞ°Ñ€Ğ´Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ·Ğ¼Ñ–Ğ½ÑÑ” Ğ¾ÑĞ²Ñ–Ñ‚Ğ½Ñ– Ğ¿Ñ–Ğ´Ñ…Ğ¾Ğ´Ğ¸. ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ ÑÑ‚Ğ°Ñ” ĞºĞ»ÑÑ‡Ğ¾Ğ²Ğ¸Ğ¼ Ñ„Ğ°ĞºÑ‚Ğ¾Ñ€Ğ¾Ğ¼ ÑƒÑĞ¿Ñ–Ñ…Ñƒ.

2. **Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ²Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ´Ğ¶ĞµĞ½Ğ½Ñ EdTech**
   Ğ—Ğ° Ğ´Ğ°Ğ½Ğ¸Ğ¼Ğ¸ UNESCO, 78% ÑƒĞ½Ñ–Ğ²ĞµÑ€ÑĞ¸Ñ‚ĞµÑ‚Ñ–Ğ² Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒÑÑ‚ÑŒ AI-Ñ–Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¸. Ğ Ğ¸Ğ½Ğ¾Ğº EdTech Ğ·Ñ€Ğ¾ÑÑ‚Ğ°Ñ” Ğ½Ğ° 45% Ñ‰Ğ¾Ñ€Ğ¾ĞºÑƒ.

3. **Ğ’Ğ¸ĞºĞ»Ğ¸ĞºĞ¸ Ñ‚Ğ° Ğ¼Ğ¾Ğ¶Ğ»Ğ¸Ğ²Ğ¾ÑÑ‚Ñ–**
   ĞÑĞ½Ğ¾Ğ²Ğ½Ñ– Ğ²Ğ¸ĞºĞ»Ğ¸ĞºĞ¸: Ğ½Ğ°Ğ²Ñ‡Ğ°Ğ½Ğ½Ñ Ğ²Ğ¸ĞºĞ»Ğ°Ğ´Ğ°Ñ‡Ñ–Ğ², ĞµÑ‚Ğ¸Ñ‡Ğ½Ñ– Ğ¿Ğ¸Ñ‚Ğ°Ğ½Ğ½Ñ, Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ–ÑÑ‚ÑŒ Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ñ–Ğ¹.
   ĞœĞ¾Ğ¶Ğ»Ğ¸Ğ²Ğ¾ÑÑ‚Ñ–: Ñ–Ğ½Ğ´Ğ¸Ğ²Ñ–Ğ´ÑƒĞ°Ğ»ÑŒĞ½Ñ– Ñ‚Ñ€Ğ°Ñ”ĞºÑ‚Ğ¾Ñ€Ñ–Ñ—, 24/7 Ğ¿Ñ–Ğ´Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ°, Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ.
"""
    
    def get_ai_analysis(self, topic: str, search_results: str) -> str:
        """ĞÑ‚Ñ€Ğ¸Ğ¼Ğ°Ñ‚Ğ¸ Ğ°Ğ½Ğ°Ğ»Ñ–Ğ· Ğ²Ñ–Ğ´ AI (ÑĞºÑ‰Ğ¾ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾)"""
        if self.has_openai:
            try:
                response = self.client.chat.completions.create(
                    model="gpt-4",
                    messages=[
                        {"role": "system", "content": "Ğ’Ğ¸ - ĞµĞºÑĞ¿ĞµÑ€Ñ‚ Ğ°Ğ½Ğ°Ğ»Ñ–Ñ‚Ğ¸Ğº. ĞŸÑ€Ğ¾Ğ°Ğ½Ğ°Ğ»Ñ–Ğ·ÑƒĞ¹Ñ‚Ğµ Ğ½Ğ°Ğ´Ğ°Ğ½Ñƒ Ñ–Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ñ–Ñ."},
                        {"role": "user", "content": f"Ğ¢ĞµĞ¼Ğ°: {topic}\n\nĞ†Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ñ–Ñ:\n{search_results}\n\nĞĞ°Ğ´Ğ°Ğ¹Ñ‚Ğµ ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğ¹ Ğ°Ğ½Ğ°Ğ»Ñ–Ğ·."}
                    ],
                    max_tokens=500,
                    temperature=0.7
                )
                return response.choices[0].message.content
            except Exception as e:
                print(f"âš ï¸ ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ° API: {e}")
        
        # Ğ”ĞµĞ¼Ğ¾ Ğ°Ğ½Ğ°Ğ»Ñ–Ğ·
        return """
ğŸ“Š **ĞĞ½Ğ°Ğ»Ñ–Ğ· Ñ‚Ñ€ĞµĞ½Ğ´Ñƒ AI Ğ² Ğ¾ÑĞ²Ñ–Ñ‚Ñ–:**

â€¢ **ĞŸĞ¾Ğ·Ğ¸Ñ‚Ğ¸Ğ²Ğ½Ñ– Ğ°ÑĞ¿ĞµĞºÑ‚Ğ¸**: Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ñ–Ñ Ğ´ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€ÑƒÑ” Ğ·Ğ½Ğ°Ñ‡Ğ½Ğ¸Ğ¹ Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ñ–Ğ°Ğ» Ğ´Ğ»Ñ Ğ¿Ğ¾ĞºÑ€Ğ°Ñ‰ĞµĞ½Ğ½Ñ ÑĞºĞ¾ÑÑ‚Ñ– Ğ¾ÑĞ²Ñ–Ñ‚Ğ¸
â€¢ **ĞšĞ»ÑÑ‡Ğ¾Ğ²Ñ– Ñ‚Ñ€ĞµĞ½Ğ´Ğ¸**: ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ, Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ñ–ÑÑ‚ÑŒ, Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ–ÑÑ‚ÑŒ
â€¢ **Ğ Ğ¸Ğ·Ğ¸ĞºĞ¸**: Ğ—Ğ°Ğ»ĞµĞ¶Ğ½Ñ–ÑÑ‚ÑŒ Ğ²Ñ–Ğ´ Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ñ–Ğ¹, Ğ¿Ğ¸Ñ‚Ğ°Ğ½Ğ½Ñ Ğ¿Ñ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ğ¾ÑÑ‚Ñ–
â€¢ **ĞŸÑ€Ğ¾Ğ³Ğ½Ğ¾Ğ·**: ĞÑ‡Ñ–ĞºÑƒÑ”Ñ‚ÑŒÑÑ Ğ¿Ğ¾Ğ´Ğ°Ğ»ÑŒÑˆĞµ Ğ·Ñ€Ğ¾ÑÑ‚Ğ°Ğ½Ğ½Ñ Ğ²Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ´Ğ¶ĞµĞ½Ğ½Ñ AI Ğ² Ğ¾ÑĞ²Ñ–Ñ‚Ğ½Ñ– Ğ¿Ñ€Ğ¾Ñ†ĞµÑĞ¸
"""
    
    def generate_report(self, topic: str) -> dict:
        """Ğ“ĞµĞ½ĞµÑ€ÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ¿Ğ¾Ğ²Ğ½Ğ¸Ğ¹ Ğ·Ğ²Ñ–Ñ‚"""
        print(f"\nğŸš€ Ğ”Ğ¾ÑĞ»Ñ–Ğ´Ğ¶ĞµĞ½Ğ½Ñ: {topic}")
        print("=" * 60)
        
        # ĞšÑ€Ğ¾Ğº 1: ĞŸĞ¾ÑˆÑƒĞº
        print("ğŸ“ Ğ•Ñ‚Ğ°Ğ¿ 1: Ğ—Ğ±Ñ–Ñ€ Ñ–Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ñ–Ñ—...")
        search_results = self.search_web(topic)
        print("   âœ“ Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¾")
        
        # ĞšÑ€Ğ¾Ğº 2: ĞĞ½Ğ°Ğ»Ñ–Ğ·
        print("ğŸ“ Ğ•Ñ‚Ğ°Ğ¿ 2: ĞĞ½Ğ°Ğ»Ñ–Ğ· Ğ´Ğ°Ğ½Ğ¸Ñ…...")
        analysis = self.get_ai_analysis(topic, search_results)
        print("   âœ“ Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¾")
        
        # ĞšÑ€Ğ¾Ğº 3: Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ·Ğ²Ñ–Ñ‚Ñƒ
        print("ğŸ“ Ğ•Ñ‚Ğ°Ğ¿ 3: Ğ¡Ñ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ Ğ·Ğ²Ñ–Ñ‚Ñƒ...")
        
        timestamp = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        
        report = f"""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    Ğ”ĞĞ¡Ğ›Ğ†Ğ”ĞĞ˜Ğ¦Ğ¬ĞšĞ˜Ğ™ Ğ—Ğ’Ğ†Ğ¢                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“… **Ğ”Ğ°Ñ‚Ğ°**: {timestamp}
ğŸ¯ **Ğ¢ĞµĞ¼Ğ°**: {topic}
ğŸ¤– **Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ°**: Universal Research Agent
ğŸ“Š **Ğ ĞµĞ¶Ğ¸Ğ¼**: {"OpenAI API" if self.has_openai else "Ğ”ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ°Ñ†Ñ–Ğ¹Ğ½Ğ¸Ğ¹"}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Œ **Ğ—Ğ†Ğ‘Ğ ĞĞĞ Ğ†ĞĞ¤ĞĞ ĞœĞĞ¦Ğ†Ğ¯**

{search_results}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ˆ **ĞĞĞĞ›Ğ†Ğ¢Ğ˜ĞšĞ**

{analysis}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’¡ **Ğ’Ğ˜Ğ¡ĞĞĞ’ĞšĞ˜**

ĞĞ° Ğ¾ÑĞ½Ğ¾Ğ²Ñ– Ğ¿Ñ€Ğ¾Ğ²ĞµĞ´ĞµĞ½Ğ¾Ğ³Ğ¾ Ğ´Ğ¾ÑĞ»Ñ–Ğ´Ğ¶ĞµĞ½Ğ½Ñ Ğ¼Ğ¾Ğ¶Ğ½Ğ° Ğ·Ñ€Ğ¾Ğ±Ğ¸Ñ‚Ğ¸ Ğ²Ğ¸ÑĞ½Ğ¾Ğ²Ğ¾Ğº, Ñ‰Ğ¾ ÑˆÑ‚ÑƒÑ‡Ğ½Ğ¸Ğ¹ 
Ñ–Ğ½Ñ‚ĞµĞ»ĞµĞºÑ‚ Ğ¼Ğ°Ñ” Ğ²ĞµĞ»Ğ¸Ñ‡ĞµĞ·Ğ½Ğ¸Ğ¹ Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ñ–Ğ°Ğ» Ğ´Ğ»Ñ Ñ‚Ñ€Ğ°Ğ½ÑÑ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ñ–Ñ— Ğ¾ÑĞ²Ñ–Ñ‚Ğ½ÑŒĞ¾Ñ— Ğ³Ğ°Ğ»ÑƒĞ·Ñ–. 
ĞšĞ»ÑÑ‡Ğ¾Ğ²Ğ¸Ğ¼Ğ¸ Ñ„Ğ°ĞºÑ‚Ğ¾Ñ€Ğ°Ğ¼Ğ¸ ÑƒÑĞ¿Ñ–Ñ…Ñƒ Ğ±ÑƒĞ´ÑƒÑ‚ÑŒ:

1. Ğ—Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹ Ğ¿Ñ–Ğ´Ñ…Ñ–Ğ´ Ğ´Ğ¾ Ğ²Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ´Ğ¶ĞµĞ½Ğ½Ñ
2. Ğ†Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ñ–Ñ— Ğ² Ğ¿Ñ–Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºÑƒ ĞºĞ°Ğ´Ñ€Ñ–Ğ²
3. Ğ’Ğ¸Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ ĞµÑ‚Ğ¸Ñ‡Ğ½Ğ¸Ñ… Ğ¿Ğ¸Ñ‚Ğ°Ğ½ÑŒ
4. Ğ—Ğ°Ğ±ĞµĞ·Ğ¿ĞµÑ‡ĞµĞ½Ğ½Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚Ñ– Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ñ–Ğ¹

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… **Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ**: Ğ”Ğ¾ÑĞ»Ñ–Ğ´Ğ¶ĞµĞ½Ğ½Ñ ÑƒÑĞ¿Ñ–ÑˆĞ½Ğ¾ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¾
ğŸ“ **Ğ—Ğ±ĞµÑ€ĞµĞ¶ĞµĞ½Ğ¾**: universal_agent_report.json
"""
        
        print("   âœ“ Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¾")
        
        # Ğ—Ğ±ĞµÑ€ĞµĞ¶ĞµĞ½Ğ½Ñ
        result = {
            "topic": topic,
            "timestamp": timestamp,
            "search_results": search_results,
            "analysis": analysis,
            "report": report,
            "mode": "api" if self.has_openai else "demo"
        }
        
        with open("universal_agent_report.json", "w", encoding="utf-8") as f:
            json.dump(result, f, ensure_ascii=False, indent=2)
        
        print("\nğŸ’¾ Ğ—Ğ²Ñ–Ñ‚ Ğ·Ğ±ĞµÑ€ĞµĞ¶ĞµĞ½Ğ¾: universal_agent_report.json")
        
        return result

# ===========================
# Ğ“ĞĞ›ĞĞ’ĞĞ Ğ¤Ğ£ĞĞšĞ¦Ğ†Ğ¯
# ===========================

def main():
    """Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ°Ğ³ĞµĞ½Ñ‚Ğ°"""
    
    print("""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘               UNIVERSAL RESEARCH AGENT                        â•‘
â•‘              ĞŸÑ€Ğ°Ñ†ÑÑ” Ğ· Ğ±ÑƒĞ´ÑŒ-ÑĞºĞ¸Ğ¼Ğ¸ Ğ²ĞµÑ€ÑÑ–ÑĞ¼Ğ¸                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    """)
    
    # ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ° ÑĞµÑ€ĞµĞ´Ğ¾Ğ²Ğ¸Ñ‰Ğ°
    print("ğŸ” ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ° ÑĞµÑ€ĞµĞ´Ğ¾Ğ²Ğ¸Ñ‰Ğ°:")
    print(f"   Python: {sys.version.split()[0]}")
    
    # ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ° Ğ¿Ğ°ĞºĞµÑ‚Ñ–Ğ²
    packages = {
        "langchain": "LangChain",
        "openai": "OpenAI",
        "duckduckgo_search": "DuckDuckGo"
    }
    
    for module, name in packages.items():
        try:
            m = __import__(module)
            version = getattr(m, "__version__", "Ğ²ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾")
            print(f"   âœ… {name}: {version}")
        except:
            print(f"   âš ï¸ {name}: Ğ½Ğµ Ğ²ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾")
    
    # API ĞºĞ»ÑÑ‡
    api_key = os.getenv("OPENAI_API_KEY")
    if api_key:
        print(f"   âœ… API ĞºĞ»ÑÑ‡: {api_key[:10]}...{api_key[-4:]}")
    else:
        print(f"   âš ï¸ API ĞºĞ»ÑÑ‡: Ğ½Ğµ Ğ·Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾ (Ğ´ĞµĞ¼Ğ¾ Ñ€ĞµĞ¶Ğ¸Ğ¼)")
    
    print("\n" + "=" * 60)
    
    # Ğ¡Ñ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ Ñ‚Ğ° Ğ·Ğ°Ğ¿ÑƒÑĞº Ğ°Ğ³ĞµĞ½Ñ‚Ğ°
    agent = UniversalResearchAgent()
    
    # Ğ¢ĞµĞ¼Ğ° Ğ´Ğ¾ÑĞ»Ñ–Ğ´Ğ¶ĞµĞ½Ğ½Ñ
    topic = "Ğ¨Ñ‚ÑƒÑ‡Ğ½Ğ¸Ğ¹ Ñ–Ğ½Ñ‚ĞµĞ»ĞµĞºÑ‚ Ğ² Ğ¾ÑĞ²Ñ–Ñ‚Ñ– 2025: Ñ‚Ñ€ĞµĞ½Ğ´Ğ¸ Ñ‚Ğ° Ğ¿ĞµÑ€ÑĞ¿ĞµĞºÑ‚Ğ¸Ğ²Ğ¸"
    
    # Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ñ–Ñ Ğ·Ğ²Ñ–Ñ‚Ñƒ
    result = agent.generate_report(topic)
    
    # Ğ’Ğ¸Ğ²ĞµĞ´ĞµĞ½Ğ½Ñ Ğ·Ğ²Ñ–Ñ‚Ñƒ
    print("\n" + "=" * 60)
    print(result["report"])
    
    print("\nâœ… ĞŸÑ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ° Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ° ÑƒÑĞ¿Ñ–ÑˆĞ½Ğ¾!")

if __name__ == "__main__":
    try:
        main()
    except KeyboardInterrupt:
        print("\n\nğŸ‘‹ ĞŸÑ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ñƒ Ğ¿ĞµÑ€ĞµÑ€Ğ²Ğ°Ğ½Ğ¾")
    except Exception as e:
        print(f"\nâŒ ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ°: {e}")
        import traceback
        traceback.print_exc()
